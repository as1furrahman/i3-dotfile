# lf file manager configuration

# Options
set hidden true
set icons true
set preview true
set previewer ~/.config/lf/preview.sh
set relativenumber true
set number true
set drawbox true
set ignorecase true
set shell bash
set shellopts '-eu'
set ifs "\n"
set scrolloff 10
set ratios 1:2:3

# Custom commands
cmd open ${{
    case $(file --mime-type "$f" -bL) in
        text/*|application/json) $EDITOR "$f" ;;
        image/*) feh "$f" ;;
        application/pdf) zathura "$f" ;;
        video/*|audio/*) mpv "$f" ;;
        *) xdg-open "$f" ;;
    esac
}}

cmd mkdir ${{
    printf "Directory Name: "
    read ans
    mkdir -p "$ans"
}}

cmd mkfile ${{
    printf "File Name: "
    read ans
    touch "$ans"
}}

cmd delete ${{
    set -f
    printf "%s\n" "$fx"
    printf "delete? [y/n] "
    read ans
    [ "$ans" = "y" ] && rm -rf $fx
}}

cmd extract ${{
    case "$f" in
        *.tar.bz2) tar xjf "$f" ;;
        *.tar.gz) tar xzf "$f" ;;
        *.tar.xz) tar xf "$f" ;;
        *.zip) unzip "$f" ;;
        *.rar) unrar x "$f" ;;
        *.7z) 7z x "$f" ;;
    esac
}}

cmd tar ${{
    set -f
    mkdir "$1"
    cp -r $fx "$1"
    tar czf "$1.tar.gz" "$1"
    rm -rf "$1"
}}

cmd zip ${{
    set -f
    mkdir "$1"
    cp -r $fx "$1"
    zip -r "$1.zip" "$1"
    rm -rf "$1"
}}

# Keybindings
map <enter> open
map d
map dd delete
map p paste
map y copy
map x cut
map r rename
map H set hidden!
map . set hidden!
map R reload
map mf mkfile
map md mkdir
map C clear

# Movement
map gd cd ~/Documents
map gD cd ~/Downloads
map gp cd ~/projects
map gc cd ~/.config
map g/ cd /

# Quick edits
map V $nvim "$f"
